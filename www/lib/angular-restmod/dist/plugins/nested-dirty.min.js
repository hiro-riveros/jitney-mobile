/**
 * API Bound Models for AngularJS
 * @version v1.1.9 - 2015-05-07
 * @link https://github.com/angular-platanus/restmod
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";a.module("restmod").factory("NestedDirtyModel",["restmod",function(b){function c(b){return a.isObject(b)&&!a.isArray(b)}function d(b){var c=b.$type,d={};return b.$each(function(b,e){var f=c.$$getDescription(e);f&&f.relation||(d[e]=a.copy(b))}),d}function e(a,b){for(var c,d=0;c=b[d++];)a&&(a=a.hasOwnProperty(c)?a[c]:null);return a}function f(b,c,d,f){var g=d.pop();return b=e(b,d),c=e(c,d),a.isObject(c)&&a.isObject(b)&&c.hasOwnProperty(g)?"function"==typeof f?!!f(b[g],c[g]):!a.equals(b[g],c[g]):!1}function g(a,b,d,e){var h,i=[];if(b)for(var j in b)b.hasOwnProperty(j)&&(c(b[j])&&c(a[j])?(h=g(a[j],b[j],d.concat([j]),e),i.push.apply(i,h)):f(a,b,[j],e)&&i.push(d.concat([j])));return i}function h(a){for(var b=0,c=a.length;c>b;b++)a[b]=a[b].join(".");return a}function i(b,c,d){var f=d.pop();b=e(b,d),c=e(c,d),c&&b&&c.hasOwnProperty(f)&&(b[f]=a.copy(c[f]))}return b.mixin(function(){this.on("after-feed",function(){this.$cmStatus=d(this)}).define("$dirty",function(b,c){var d=this.$cmStatus;return b&&!a.isFunction(b)?f(this,d,b.split("."),c):(a.isFunction(b)&&(c=b),h(g(this,d,[],c)))}).define("$restore",function(a){return this.$action(function(){var b=this.$cmStatus;if(a){var c=a.split(".");i(this,b,c)}else for(var d=g(this,b,[]),e=0,f=d.length;f>e;e++)i(this,b,d[e])})})})}])}(angular);